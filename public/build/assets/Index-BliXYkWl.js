import{g as z,i as $,M as L,_ as M,a as P,b as S,c as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-DCyrZn7v.js";import{u as A,_ as O,a as H,b as K,c as D,d as V,e as Y,g as G,f as J}from"./index-Ch3UBGR-.js";import{d as C,r as q,c as v,o as d,w as l,a as o,u as e,b as I,m as T,n as U,g as E,e as B,f as p,h as Q,i as b,F as x,j as w,k as y,l as W,t as h,p as X,q as Z}from"./app-bJ6iXS3U.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-CiLteWcf.js";import{P as te,c as se,a as ae,_ as N}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-kmh7pgpE.js";import{C as le,_ as oe}from"./Checkbox.vue_vue_type_script_setup_true_lang-WYRqAb4D.js";import{c as ne,P as re,u as ue,a as ie}from"./VisuallyHidden-BZFvyB47.js";import{u as de,a as F}from"./useForwardExpose-B6Gvw_x_.js";const[ce,pe]=ne(["MenuCheckboxItem","MenuRadioItem"],"MenuItemIndicatorContext");var me=C({__name:"MenuItemIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(_){const i=ce({modelValue:q(!1)});return(n,m)=>(d(),v(e(re),{present:n.forceMount||e($)(e(i).modelValue.value)||e(i).modelValue.value===!0},{default:l(()=>[o(e(te),{as:n.as,"as-child":n.asChild,"data-state":e(z)(e(i).modelValue.value)},{default:l(()=>[I(n.$slots,"default")]),_:3},8,["as","as-child","data-state"])]),_:3},8,["present"]))}}),fe=me,_e=C({__name:"MenuCheckboxItem",props:{modelValue:{type:[Boolean,String],required:!1,default:!1},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select","update:modelValue"],setup(_,{emit:i}){const n=_,m=i,c=de(n,"modelValue",m);return pe({modelValue:c}),(t,f)=>(d(),v(L,T({role:"menuitemcheckbox"},n,{"aria-checked":e($)(e(c))?"mixed":e(c),"data-state":e(z)(e(c)),onSelect:f[0]||(f[0]=async u=>{m("select",u),e($)(e(c))?c.value=!0:c.value=!e(c)})}),{default:l(()=>[I(t.$slots,"default",{modelValue:e(c)})]),_:3},16,["aria-checked","data-state"]))}}),ve=_e,ge=C({__name:"DropdownMenuCheckboxItem",props:{modelValue:{type:[Boolean,String],required:!1},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select","update:modelValue"],setup(_,{emit:i}){const n=_,c=ue(i);return F(),(t,f)=>(d(),v(e(ve),U(E({...n,...e(c)})),{default:l(()=>[I(t.$slots,"default")]),_:3},16))}}),be=ge,ye=C({__name:"DropdownMenuItemIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(_){const i=_;return F(),(n,m)=>(d(),v(e(fe),U(E(i)),{default:l(()=>[I(n.$slots,"default")]),_:3},16))}}),xe=ye;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=se("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ce={class:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center"},k=C({__name:"DropdownMenuCheckboxItem",props:{modelValue:{type:[Boolean,String]},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},emits:["select","update:modelValue"],setup(_,{emit:i}){const n=_,m=i,c=B(()=>{const{class:f,...u}=n;return u}),t=ie(c,m);return(f,u)=>(d(),v(e(be),T({"data-slot":"dropdown-menu-checkbox-item"},e(t),{class:e(ae)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n.class)}),{default:l(()=>[p("span",Ce,[o(e(xe),null,{default:l(()=>[o(e(le),{class:"size-4"})]),_:1})]),I(f.$slots,"default")]),_:3},16,["class"]))}}),he={class:"flex items-center justify-between space-x-2 py-4"},we={class:"flex items-center space-x-2"},Ie=["value"],ke={class:"flex items-center space-x-2"},Ve={class:"text-sm text-gray-700"},$e={class:"flex space-x-1"},Me=["disabled"],Pe=["disabled"],Se=["disabled"],qe=["disabled"],Be=C({__name:"CustomerTable",props:{filters:{},columns:{}},setup(_){const i=_,{props:n}=Q(),m=B(()=>{let u=n.customers||[];if(i.filters.searchTerm){const s=i.filters.searchTerm.toLowerCase();u=u.filter(r=>r.name?.toLowerCase().includes(s)||r.email?.toLowerCase().includes(s)||r.cus_id?.toLowerCase().includes(s))}i.filters.subscribedOnly&&(u=u.filter(s=>s.subscribed===!0));const a=i.filters.currencies.filter(s=>s.active).map(s=>s.currency);return a.length>0&&a.length<i.filters.currencies.length&&(u=u.filter(s=>a.includes(s.currency))),u}),c=B(()=>i.columns.filter(u=>u.active).map(u=>({accessorKey:u.column,header:u.header,cell:({row:a})=>{const s=a.getValue(u.column);return u.column==="subscribed"?s?"Yes":"No":s}}))),t=A({get data(){return m.value},get columns(){return c.value},getCoreRowModel:J(),getPaginationRowModel:G(),initialState:{pagination:{pageSize:10}}}),f=u=>{X.visit(route("customers.show",u.id))};return(u,a)=>(d(),b(x,null,[o(e(O),null,{default:l(()=>[o(e(H),null,{default:l(()=>[(d(!0),b(x,null,w(e(t).getHeaderGroups(),s=>(d(),v(e(V),{key:s.id},{default:l(()=>[(d(!0),b(x,null,w(s.headers,r=>(d(),v(e(Y),{key:r.id},{default:l(()=>[y(h(r.isPlaceholder?"":r.column.columnDef.header),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),o(e(K),null,{default:l(()=>[e(t).getRowModel().rows.length?(d(!0),b(x,{key:0},w(e(t).getRowModel().rows,s=>(d(),v(e(V),{key:s.id,onClick:r=>f(s.original),class:"cursor-pointer hover:bg-gray-100"},{default:l(()=>[(d(!0),b(x,null,w(s.getVisibleCells(),r=>(d(),v(e(D),{key:r.id},{default:l(()=>[y(h(r.getValue()),1)]),_:2},1024))),128))]),_:2},1032,["onClick"]))),128)):(d(),v(e(V),{key:1},{default:l(()=>[o(e(D),{colspan:c.value.length,class:"h-24 text-center"},{default:l(()=>a[5]||(a[5]=[y(" No customers found. ",-1)])),_:1,__:[5]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),p("div",he,[p("div",we,[a[7]||(a[7]=p("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),p("select",{value:e(t).getState().pagination.pageSize,onChange:a[0]||(a[0]=s=>e(t).setPageSize(Number(s.target.value))),class:"border rounded px-2 py-1"},a[6]||(a[6]=[W('<option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5)]),40,Ie)]),p("div",ke,[p("span",Ve," Page "+h(e(t).getState().pagination.pageIndex+1)+" of "+h(e(t).getPageCount())+" ("+h(e(t).getFilteredRowModel().rows.length)+" total rows) ",1),p("div",$e,[p("button",{onClick:a[1]||(a[1]=s=>e(t).setPageIndex(0)),disabled:!e(t).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,Me),p("button",{onClick:a[2]||(a[2]=s=>e(t).previousPage()),disabled:!e(t).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,Pe),p("button",{onClick:a[3]||(a[3]=s=>e(t).nextPage()),disabled:!e(t).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,Se),p("button",{onClick:a[4]||(a[4]=s=>e(t).setPageIndex(e(t).getPageCount()-1)),disabled:!e(t).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,qe)])])])],64))}}),De={class:"flex items-center gap-8"},Ne={class:"flex items-center gap-4 w-full"},Re={class:"flex items-center gap-2"},ze=C({__name:"CustomerFilters",props:{filters:{},columns:{}},emits:["update:filters","update:columns"],setup(_,{emit:i}){const n=_,m=i,c=a=>{m("update:filters",{...n.filters,searchTerm:a})},t=a=>{m("update:filters",{...n.filters,subscribedOnly:a})},f=(a,s)=>{const r=n.columns.map(g=>g.column===a?{...g,active:s}:g);m("update:columns",r)},u=(a,s)=>{const r=n.filters.currencies.map(g=>g.currency===a?{...g,active:s}:g);m("update:filters",{...n.filters,currencies:r})};return(a,s)=>(d(),b("div",De,[p("div",Ne,[o(e(ee),{"model-value":a.filters.searchTerm,"onUpdate:modelValue":c,type:"text",placeholder:"Search customers (Name, Email, Stripe ID)",class:"input input-bordered w-full max-w-xs"},null,8,["model-value"]),o(e(M),null,{default:l(()=>[o(e(P),{"as-child":""},{default:l(()=>[o(e(N),{variant:"outline"},{default:l(()=>[s[0]||(s[0]=y(" Columns ",-1)),o(e(R),{class:"ml-2 h-4 w-4"})]),_:1,__:[0]})]),_:1}),o(e(S),{align:"end"},{default:l(()=>[(d(!0),b(x,null,w(a.columns,r=>(d(),v(e(k),{key:r.column,class:"capitalize","model-value":r.active,"onUpdate:modelValue":g=>f(r.column,g)},{default:l(()=>[y(h(r.header),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1}),o(e(M),null,{default:l(()=>[o(e(P),{"as-child":""},{default:l(()=>[o(e(N),{variant:"outline"},{default:l(()=>[s[1]||(s[1]=y(" Currencies ",-1)),o(e(R),{class:"ml-2 h-4 w-4"})]),_:1,__:[1]})]),_:1}),o(e(S),{align:"end"},{default:l(()=>[(d(!0),b(x,null,w(a.filters.currencies,r=>(d(),v(e(k),{key:r.currency,class:"capitalize","model-value":r.active,"onUpdate:modelValue":g=>u(r.currency,g)},{default:l(()=>[y(h(r.currency),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1}),p("div",Re,[o(e(oe),{"model-value":a.filters.subscribedOnly,"onUpdate:modelValue":t,class:"ml-4"},null,8,["model-value"]),s[2]||(s[2]=p("label",null,"Subscribed only",-1))])])]))}}),Te={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},Ue={class:"flex items-center justify-between"},Ye=C({__name:"Index",setup(_){const i=[{title:"Customers",href:"/customers"}],n=q({searchTerm:"",subscribedOnly:!1,currencies:[{currency:"usd",active:!0},{currency:"eur",active:!0}]}),m=q([{column:"name",header:"Name",active:!0,direction:"asc"},{column:"email",header:"Email",active:!0,direction:"asc"},{column:"cus_id",header:"Stripe ID",active:!0,direction:"asc"},{column:"subscribed",header:"Subscribed",active:!0,direction:"asc"},{column:"currency",header:"Currency",active:!0,direction:"asc"}]);return(c,t)=>(d(),b(x,null,[o(e(Z),{title:"Customers"}),o(j,{breadcrumbs:i},{default:l(()=>[p("div",Te,[p("div",Ue,[t[5]||(t[5]=p("h1",{class:"text-2xl font-bold"},"Customers",-1)),o(e(M),null,{default:l(()=>[o(e(P),{"as-child":""},{default:l(()=>t[2]||(t[2]=[p("button",{class:"btn btn-primary"},"Actions",-1)])),_:1,__:[2]}),o(e(S),null,{default:l(()=>[o(e(k),{checked:""},{default:l(()=>t[3]||(t[3]=[y("Export CSV",-1)])),_:1,__:[3]}),o(e(k),null,{default:l(()=>t[4]||(t[4]=[y("Import CSV",-1)])),_:1,__:[4]})]),_:1})]),_:1})]),o(e(ze),{filters:n.value,"onUpdate:filters":t[0]||(t[0]=f=>n.value=f),columns:m.value,"onUpdate:columns":t[1]||(t[1]=f=>m.value=f)},null,8,["filters","columns"]),o(e(Be),{filters:n.value,columns:m.value},null,8,["filters","columns"])])]),_:1})],64))}});export{Ye as default};
