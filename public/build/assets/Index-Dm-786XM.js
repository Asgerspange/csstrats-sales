import{_ as N,a as M,b as R,c as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-BtIDg7R2.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-CSvijbwW.js";import{_ as T,v as I}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DYmTopAa.js";import{_ as S}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-BqdIilOq.js";import{C as L}from"./chevron-down-CREuYW3A.js";import{d as P,c as p,o as u,a as i,b as l,u as e,w as n,e as b,F as _,r as x,f,t as w,g as k,h as F,i as D,j as h,k as z,l as B,m as j,n as E,p as O}from"./app-CbWppnbc.js";import{_ as H,a as K,b as q,c as V,d as $,e as G}from"./TableHeader.vue_vue_type_script_setup_true_lang-B7miPc9r.js";import{u as J,g as Q,a as W,b as X}from"./index-GpVbQcEm.js";import{A as Y}from"./arrow-up-down-CMvKi9jU.js";import"./useForwardExpose-98IC4jck.js";import"./VisuallyHidden-BhZ8vHif.js";import"./check-6R4T0qJM.js";const Z={class:"flex items-center gap-8"},ee={class:"flex items-center gap-4 w-full"},te=P({__name:"DemoFilters",props:{filters:{},columns:{}},emits:["update:filters","update:columns"],setup(C,{emit:g}){const d=C,m=g,y=s=>{m("update:filters",{...d.filters,searchTerm:s})},r=(s,v)=>{const o=d.columns.map(t=>t.column===s?{...t,active:v}:t);m("update:columns",o)};return(s,v)=>(u(),p("div",Z,[i("div",ee,[l(e(A),{"model-value":s.filters.searchTerm,"onUpdate:modelValue":y,type:"text",placeholder:"Search demos (Name, Map, Status, Owner, Version, Created At)",class:"input input-bordered w-full max-w-xs"},null,8,["model-value"]),l(e(N),null,{default:n(()=>[l(e(M),{"as-child":""},{default:n(()=>[l(e(T),{variant:"outline"},{default:n(()=>[v[0]||(v[0]=b(" Columns ",-1)),l(e(L),{class:"ml-2 h-4 w-4"})]),_:1,__:[0]})]),_:1}),l(e(R),{align:"end"},{default:n(()=>[(u(!0),p(_,null,x(s.columns,o=>(u(),f(e(S),{key:o.column,class:"capitalize","model-value":o.active,"onUpdate:modelValue":t=>r(o.column,t)},{default:n(()=>[b(w(o.header),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})])]))}}),se={class:"flex items-center justify-between space-x-2 py-4"},ae={class:"flex items-center space-x-2"},oe=["value"],ne={class:"flex items-center space-x-2"},le={class:"text-sm text-gray-700"},re={class:"flex space-x-1"},ie=["disabled"],ue=["disabled"],de=["disabled"],ce=["disabled"],me=P({__name:"DemoTable",props:{filters:{},columns:{}},setup(C){const g=k([]),d=C,{props:m}=F(),y=D(()=>{let o=m.demos||[];if(d.filters.searchTerm){const t=d.filters.searchTerm.toLowerCase();o=o.filter(a=>a.name?.toLowerCase().includes(t)||a.upload_id?.toLowerCase().includes(t)||a.map?.toLowerCase().includes(t)||a.owner?.toString().includes(t)||a.version?.toString().includes(t))}return o}),r=D(()=>d.columns.filter(o=>o.active).map(o=>{const t=["id","created_at"].includes(o.column);return{accessorKey:o.column,header:({column:a})=>t?h(T,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc")},()=>[o.header,h(Y,{class:"ml-2 h-4 w-4"})]):h("span",o.header),accessorFn:a=>o.column==="owner"?a.owner?.name+" -- "+a.owner?.id||"N/A":o.column==="created_at"?new Date(a.created_at).toLocaleDateString():a[o.column],enableSorting:t}})),s=J({get data(){return y.value},get columns(){return r.value},getCoreRowModel:X(),getPaginationRowModel:W(),getSortedRowModel:Q(),onSortingChange:o=>I(o,g),state:{get sorting(){return g.value}},initialState:{pagination:{pageSize:10},sorting:[]}}),v=o=>{E.visit(route("admin.users.show",o.owner.id))};return(o,t)=>(u(),p(_,null,[l(e(H),null,{default:n(()=>[l(e(K),null,{default:n(()=>[(u(!0),p(_,null,x(e(s).getHeaderGroups(),a=>(u(),f(e($),{key:a.id},{default:n(()=>[(u(!0),p(_,null,x(a.headers,c=>(u(),f(e(G),{key:c.id},{default:n(()=>[c.isPlaceholder?B("",!0):(u(),f(j(typeof c.column.columnDef.header=="function"?c.column.columnDef.header({column:c.column}):c.column.columnDef.header),{key:0}))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),l(e(q),null,{default:n(()=>[e(s).getRowModel().rows.length?(u(!0),p(_,{key:0},x(e(s).getRowModel().rows,a=>(u(),f(e($),{key:a.id,onClick:c=>v(a.original),class:"cursor-pointer hover:bg-gray-100"},{default:n(()=>[(u(!0),p(_,null,x(a.getVisibleCells(),c=>(u(),f(e(V),{key:c.id},{default:n(()=>[b(w(c.getValue()),1)]),_:2},1024))),128))]),_:2},1032,["onClick"]))),128)):(u(),f(e($),{key:1},{default:n(()=>[l(e(V),{colspan:r.value.length,class:"h-24 text-center"},{default:n(()=>t[5]||(t[5]=[b(" No demos found. ",-1)])),_:1,__:[5]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),i("div",se,[i("div",ae,[t[7]||(t[7]=i("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),i("select",{value:e(s).getState().pagination.pageSize,onChange:t[0]||(t[0]=a=>e(s).setPageSize(Number(a.target.value))),class:"border rounded px-2 py-1"},t[6]||(t[6]=[z('<option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5)]),40,oe)]),i("div",ne,[i("span",le," Page "+w(e(s).getState().pagination.pageIndex+1)+" of "+w(e(s).getPageCount())+" ("+w(e(s).getFilteredRowModel().rows.length)+" total rows) ",1),i("div",re,[i("button",{onClick:t[1]||(t[1]=a=>e(s).setPageIndex(0)),disabled:!e(s).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,ie),i("button",{onClick:t[2]||(t[2]=a=>e(s).previousPage()),disabled:!e(s).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,ue),i("button",{onClick:t[3]||(t[3]=a=>e(s).nextPage()),disabled:!e(s).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,de),i("button",{onClick:t[4]||(t[4]=a=>e(s).setPageIndex(e(s).getPageCount()-1)),disabled:!e(s).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,ce)])])])],64))}}),pe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},fe={class:"flex items-center justify-between"},Pe=P({__name:"Index",setup(C){const g=[{title:"Demos",href:"/admin/demos"}],d=k({searchTerm:""}),m=k([{column:"id",header:"ID",active:!0},{column:"name",header:"Name",active:!0,direction:"asc"},{column:"map",header:"Map",active:!0,direction:"asc"},{column:"owner",header:"Owner",active:!0,direction:"asc"},{column:"version",header:"Version",active:!0,direction:"asc"},{column:"created_at",header:"Created At",active:!0,direction:"asc"}]);return(y,r)=>(u(),p(_,null,[l(e(O),{title:"Users"}),l(U,{breadcrumbs:g},{default:n(()=>[i("div",pe,[i("div",fe,[r[5]||(r[5]=i("h1",{class:"text-2xl font-bold"},"Demos",-1)),l(e(N),null,{default:n(()=>[l(e(M),{"as-child":""},{default:n(()=>r[2]||(r[2]=[i("button",{class:"btn btn-primary"},"Actions",-1)])),_:1,__:[2]}),l(e(R),null,{default:n(()=>[l(e(S),{checked:""},{default:n(()=>r[3]||(r[3]=[b("Export CSV",-1)])),_:1,__:[3]}),l(e(S),null,{default:n(()=>r[4]||(r[4]=[b("Import CSV",-1)])),_:1,__:[4]})]),_:1})]),_:1})]),l(e(te),{filters:d.value,"onUpdate:filters":r[0]||(r[0]=s=>d.value=s),columns:m.value,"onUpdate:columns":r[1]||(r[1]=s=>m.value=s)},null,8,["filters","columns"]),l(e(me),{filters:d.value,columns:m.value},null,8,["filters","columns"])])]),_:1})],64))}});export{Pe as default};
