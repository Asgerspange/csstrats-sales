import{s as U,R as V,c as k}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dm-R0bL8.js";import{_ as S,a as R,b as M,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-B2yhIpfm.js";import{d as b,u as y,h as f,o as d,w as l,b as s,f as e,i as _,e as t,t as m,c as I,v as x,a as h,F as v,g as $,j as F,n as T,M as C}from"./app-BGRNuroF.js";import{_ as j,a as B,b as A,c as N,d as w,e as K}from"./TableHeader.vue_vue_type_script_setup_true_lang-DYGgvG1D.js";import{u as z,F as H,b as L,g as q,a as E}from"./index-DrEu-oDV.js";import{C as O}from"./calendar-DmEwygv5.js";import{c as G}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-LURPWeXY.js";import"./useForwardExpose-BF0rGXys.js";import"./VisuallyHidden-CVXYfjO4.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=G("DollarSignIcon",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Q={class:"flex flex-col gap-2"},W={class:"text-2xl font-bold"},X=b({__name:"PaidPaymentsCard",setup(P){const{props:p}=y(),c=p.payments_this_month.filter(u=>u.status==="paid");return(u,i)=>(d(),f(e(D),null,{default:l(()=>[s(e(S),null,{default:l(()=>[s(e(R),null,{default:l(()=>i[0]||(i[0]=[_("Paid Payments",-1)])),_:1,__:[0]})]),_:1}),s(e(M),null,{default:l(()=>[t("div",Q,[t("p",W,m(e(c).length),1)])]),_:1})]),_:1}))}}),Y={class:"flex flex-col gap-2"},Z={class:"text-2xl font-bold"},ee=b({__name:"UpcomingPaymentsCard",setup(P){const{props:p}=y(),c=p.payments_this_month.filter(u=>u.status==="upcoming");return(u,i)=>(d(),f(e(D),null,{default:l(()=>[s(e(S),null,{default:l(()=>[s(e(R),null,{default:l(()=>i[0]||(i[0]=[_("Upcoming Payments",-1)])),_:1,__:[0]})]),_:1}),s(e(M),null,{default:l(()=>[t("div",Y,[t("p",Z,m(e(c).length),1)])]),_:1})]),_:1}))}}),te={class:"flex flex-col gap-2"},se={class:"text-2xl font-bold"},ae=b({__name:"UnpaidPaymentsCard",setup(P){const{props:p}=y(),c=p.payments_this_month.filter(u=>u.status==="unpaid");return(u,i)=>(d(),f(e(D),null,{default:l(()=>[s(e(S),null,{default:l(()=>[s(e(R),null,{default:l(()=>i[0]||(i[0]=[_("Unpaid / Failed Payments",-1)])),_:1,__:[0]})]),_:1}),s(e(M),null,{default:l(()=>[t("div",te,[t("p",se,m(e(c).length),1)])]),_:1})]),_:1}))}}),oe={class:"flex items-center justify-between space-x-2 py-4"},le={class:"flex items-center space-x-2"},ne=["value"],re={class:"flex items-center space-x-2"},ie={class:"text-sm text-gray-700"},de={class:"flex space-x-1"},ue=["disabled"],ce=["disabled"],pe=["disabled"],_e=["disabled"],fe=b({__name:"PaymentsTable",setup(P){const p=["customer_id"],{props:c}=y(),u=I(()=>c.payments||[]),i=I(()=>Object.keys(c.payments_this_month[0]||{}).filter(r=>!p.includes(r)).filter(r=>{const o=c.payments_this_month[0]?.[r];return!(Array.isArray(o)&&o.length===0)}).map(r=>r==="billing_reason"?{header:"Reason",accessorKey:r,cell:o=>{const n=o.getValue();return n==="subscription_create"?x(TooltipProvider,{delayDuration:100},()=>x(Tooltip,null,{default:()=>[x(TooltipTrigger,{asChild:!0},()=>x(CalendarPlus,{class:"w-4 h-4 inline-block text-gray-600"})),x(TooltipContent,null,()=>String(n))]})):String(n??"")}}:r==="customer"?{header:"Customer",accessorKey:r,cell:o=>{const n=o.getValue();return x("a",{href:route("sales.customers.show",n.id),class:"text-blue-600 hover:underline"},n.name)}}:r=="amount"?{header:r.charAt(0).toUpperCase()+r.slice(1),accessorKey:r,cell:o=>{const n=o.getValue();return new Intl.NumberFormat("en-US",{style:"currency",currency:o.row.original.currency||"USD"}).format(n/100)}}:{header:r.charAt(0).toUpperCase()+r.slice(1),accessorKey:r})),a=z({get data(){return u.value},get columns(){return i.value},getCoreRowModel:E(),getPaginationRowModel:q(),getSortedRowModel:L(),initialState:{pagination:{pageSize:10},sorting:[{id:"date",desc:!0}]}});return(r,o)=>(d(),h(v,null,[s(e(j),null,{default:l(()=>[s(e(B),null,{default:l(()=>[(d(!0),h(v,null,$(e(a).getHeaderGroups(),n=>(d(),f(e(w),{key:n.id},{default:l(()=>[(d(!0),h(v,null,$(n.headers,g=>(d(),f(e(K),{key:g.id},{default:l(()=>[_(m(g.isPlaceholder?"":g.column.columnDef.header),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),s(e(A),null,{default:l(()=>[e(a).getRowModel().rows.length?(d(!0),h(v,{key:0},$(e(a).getRowModel().rows,n=>(d(),f(e(w),{key:n.id,class:"cursor-pointer hover:bg-gray-100"},{default:l(()=>[(d(!0),h(v,null,$(n.getVisibleCells(),g=>(d(),f(e(N),{key:g.id},{default:l(()=>[s(e(H),{render:g.column.columnDef.cell,props:g.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(d(),f(e(w),{key:1},{default:l(()=>[s(e(N),{colspan:i.value.length,class:"h-24 text-center"},{default:l(()=>o[5]||(o[5]=[_(" No customers found. ",-1)])),_:1,__:[5]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),t("div",oe,[t("div",le,[o[7]||(o[7]=t("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),t("select",{value:e(a).getState().pagination.pageSize,onChange:o[0]||(o[0]=n=>e(a).setPageSize(Number(n.target.value))),class:"border rounded px-2 py-1"},o[6]||(o[6]=[F('<option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5)]),40,ne)]),t("div",re,[t("span",ie," Page "+m(e(a).getState().pagination.pageIndex+1)+" of "+m(e(a).getPageCount())+" ("+m(e(a).getFilteredRowModel().rows.length)+" total rows) ",1),t("div",de,[t("button",{onClick:o[1]||(o[1]=n=>e(a).setPageIndex(0)),disabled:!e(a).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,ue),t("button",{onClick:o[2]||(o[2]=n=>e(a).previousPage()),disabled:!e(a).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,ce),t("button",{onClick:o[3]||(o[3]=n=>e(a).nextPage()),disabled:!e(a).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,pe),t("button",{onClick:o[4]||(o[4]=n=>e(a).setPageIndex(e(a).getPageCount()-1)),disabled:!e(a).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,_e)])])])],64))}}),ge={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},me={class:"grid auto-rows-min gap-4 md:grid-cols-3"},xe={class:"relative"},he={class:"relative"},ve={class:"relative"},be={class:"grid auto-rows-min gap-4 md:grid-cols-4"},ye={class:"relative"},Pe={class:"flex gap-2 justify-center"},$e={class:"relative"},Ce={class:"flex gap-2 justify-center"},we={class:"relative"},Se={class:"flex gap-2 justify-center"},Re={class:"relative"},Me={class:"flex gap-2 justify-center"},Be=b({__name:"Index",setup(P){const p=[{title:"Billing",href:"/sales/billing"}],{props:c}=y();console.log(c);const u=[{column:"customer_id",header:"Customer ID",active:!0,direction:"asc"},{column:"subscription_id",header:"Subscription ID",active:!0,direction:"asc"},{column:"amount",header:"Amount",active:!0,direction:"asc"},{column:"currency",header:"Currency",active:!0,direction:"asc"},{column:"date",header:"Date",active:!0,direction:"asc"}];return(i,a)=>(d(),h(v,null,[s(e(T),{title:"Billing"}),s(k,{breadcrumbs:p},{default:l(()=>[t("div",ge,[t("div",me,[t("div",xe,[s(e(X))]),t("div",he,[s(e(ae))]),t("div",ve,[s(e(ee))])]),t("div",be,[t("div",ye,[s(e(C),{href:i.route("sales.customers.index"),class:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"},{default:l(()=>[t("div",Pe,[s(e(U),{class:"h-6 w-6"}),a[0]||(a[0]=_(" Customers ",-1))])]),_:1},8,["href"])]),t("div",$e,[s(e(C),{href:i.route("sales.billing.calendar"),class:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"},{default:l(()=>[t("div",Ce,[s(e(O),{class:"h-6 w-6"}),a[1]||(a[1]=_(" Calendar ",-1))])]),_:1},8,["href"])]),t("div",we,[s(e(C),{href:i.route("sales.billing.calendar"),class:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"},{default:l(()=>[t("div",Se,[s(e(V),{class:"h-6 w-6"}),a[2]||(a[2]=_(" Invoices ",-1))])]),_:1},8,["href"])]),t("div",Re,[s(e(C),{href:i.route("sales.billing.calendar"),class:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"},{default:l(()=>[t("div",Me,[s(e(J),{class:"h-6 w-6"}),a[3]||(a[3]=_(" Subscriptions ",-1))])]),_:1},8,["href"])])]),s(e(fe),{columns:u})])]),_:1})],64))}});export{Be as default};
