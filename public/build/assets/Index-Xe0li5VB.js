import{_ as k,a as P,b as S,c as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-CLaohlMC.js";import{u as L,_ as z,a as D,b as F,c as N,d as h,e as O,g as B,f as E}from"./index-Brss7FaQ.js";import{d as V,u as j,c as R,a as p,o as u,F as g,b as n,e as i,f as e,w as o,r as C,g as b,h as _,i as A,t as x,j as H,k as T,l as K}from"./app-CGAodL7E.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-BiQJCqsp.js";import{_ as U}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DH1JaPdY.js";import{_ as q}from"./Checkbox.vue_vue_type_script_setup_true_lang-CCCBKDx_.js";import{C as I,_ as $}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-DJEpktqg.js";import"./useForwardExpose-nnQlTxOS.js";import"./VisuallyHidden-ddvosdMk.js";const G={class:"flex items-center justify-between space-x-2 py-4"},J={class:"flex items-center space-x-2"},Q=["value"],W={class:"flex items-center space-x-2"},X={class:"text-sm text-gray-700"},Z={class:"flex space-x-1"},ee=["disabled"],te=["disabled"],se=["disabled"],le=["disabled"],ae=V({__name:"CustomerTable",props:{filters:{},columns:{}},setup(w){const m=w,{props:d}=j(),f=R(()=>{let r=d.customers||[];if(m.filters.searchTerm){const t=m.filters.searchTerm.toLowerCase();r=r.filter(a=>a.name?.toLowerCase().includes(t)||a.email?.toLowerCase().includes(t)||a.cus_id?.toLowerCase().includes(t))}m.filters.subscribedOnly&&(r=r.filter(t=>t.subscribed===!0));const s=m.filters.currencies.filter(t=>t.active).map(t=>t.currency);return s.length>0&&s.length<m.filters.currencies.length&&(r=r.filter(t=>s.includes(t.currency))),r}),y=R(()=>m.columns.filter(r=>r.active).map(r=>({accessorKey:r.column,header:r.header,cell:({row:s})=>{const t=s.getValue(r.column);return r.column==="subscribed"?t?"Yes":"No":t}}))),l=L({get data(){return f.value},get columns(){return y.value},getCoreRowModel:E(),getPaginationRowModel:B(),initialState:{pagination:{pageSize:10}}}),v=r=>{H.visit(route("customers.show",r.id))};return(r,s)=>(u(),p(g,null,[n(e(z),null,{default:o(()=>[n(e(D),null,{default:o(()=>[(u(!0),p(g,null,C(e(l).getHeaderGroups(),t=>(u(),b(e(h),{key:t.id},{default:o(()=>[(u(!0),p(g,null,C(t.headers,a=>(u(),b(e(O),{key:a.id},{default:o(()=>[_(x(a.isPlaceholder?"":a.column.columnDef.header),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),n(e(F),null,{default:o(()=>[e(l).getRowModel().rows.length?(u(!0),p(g,{key:0},C(e(l).getRowModel().rows,t=>(u(),b(e(h),{key:t.id,onClick:a=>v(t.original),class:"cursor-pointer hover:bg-gray-100"},{default:o(()=>[(u(!0),p(g,null,C(t.getVisibleCells(),a=>(u(),b(e(N),{key:a.id},{default:o(()=>[_(x(a.getValue()),1)]),_:2},1024))),128))]),_:2},1032,["onClick"]))),128)):(u(),b(e(h),{key:1},{default:o(()=>[n(e(N),{colspan:y.value.length,class:"h-24 text-center"},{default:o(()=>s[5]||(s[5]=[_(" No customers found. ",-1)])),_:1,__:[5]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),i("div",G,[i("div",J,[s[7]||(s[7]=i("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),i("select",{value:e(l).getState().pagination.pageSize,onChange:s[0]||(s[0]=t=>e(l).setPageSize(Number(t.target.value))),class:"border rounded px-2 py-1"},s[6]||(s[6]=[A('<option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5)]),40,Q)]),i("div",W,[i("span",X," Page "+x(e(l).getState().pagination.pageIndex+1)+" of "+x(e(l).getPageCount())+" ("+x(e(l).getFilteredRowModel().rows.length)+" total rows) ",1),i("div",Z,[i("button",{onClick:s[1]||(s[1]=t=>e(l).setPageIndex(0)),disabled:!e(l).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,ee),i("button",{onClick:s[2]||(s[2]=t=>e(l).previousPage()),disabled:!e(l).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,te),i("button",{onClick:s[3]||(s[3]=t=>e(l).nextPage()),disabled:!e(l).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,se),i("button",{onClick:s[4]||(s[4]=t=>e(l).setPageIndex(e(l).getPageCount()-1)),disabled:!e(l).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,le)])])])],64))}}),ne={class:"flex items-center gap-8"},oe={class:"flex items-center gap-4 w-full"},re={class:"flex items-center gap-2"},ie=V({__name:"CustomerFilters",props:{filters:{},columns:{}},emits:["update:filters","update:columns"],setup(w,{emit:m}){const d=w,f=m,y=s=>{f("update:filters",{...d.filters,searchTerm:s})},l=s=>{f("update:filters",{...d.filters,subscribedOnly:s})},v=(s,t)=>{const a=d.columns.map(c=>c.column===s?{...c,active:t}:c);f("update:columns",a)},r=(s,t)=>{const a=d.filters.currencies.map(c=>c.currency===s?{...c,active:t}:c);f("update:filters",{...d.filters,currencies:a})};return(s,t)=>(u(),p("div",ne,[i("div",oe,[n(e(Y),{"model-value":s.filters.searchTerm,"onUpdate:modelValue":y,type:"text",placeholder:"Search customers (Name, Email, Stripe ID)",class:"input input-bordered w-full max-w-xs"},null,8,["model-value"]),n(e(k),null,{default:o(()=>[n(e(P),{"as-child":""},{default:o(()=>[n(e(U),{variant:"outline"},{default:o(()=>[t[0]||(t[0]=_(" Columns ",-1)),n(e(I),{class:"ml-2 h-4 w-4"})]),_:1,__:[0]})]),_:1}),n(e(S),{align:"end"},{default:o(()=>[(u(!0),p(g,null,C(s.columns,a=>(u(),b(e($),{key:a.column,class:"capitalize","model-value":a.active,"onUpdate:modelValue":c=>v(a.column,c)},{default:o(()=>[_(x(a.header),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1}),n(e(k),null,{default:o(()=>[n(e(P),{"as-child":""},{default:o(()=>[n(e(U),{variant:"outline"},{default:o(()=>[t[1]||(t[1]=_(" Currencies ",-1)),n(e(I),{class:"ml-2 h-4 w-4"})]),_:1,__:[1]})]),_:1}),n(e(S),{align:"end"},{default:o(()=>[(u(!0),p(g,null,C(s.filters.currencies,a=>(u(),b(e($),{key:a.currency,class:"capitalize","model-value":a.active,"onUpdate:modelValue":c=>r(a.currency,c)},{default:o(()=>[_(x(a.currency),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1}),i("div",re,[n(e(q),{"model-value":s.filters.subscribedOnly,"onUpdate:modelValue":l,class:"ml-4"},null,8,["model-value"]),t[2]||(t[2]=i("label",null,"Subscribed only",-1))])])]))}}),ue={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},de={class:"flex items-center justify-between"},Ce=V({__name:"Index",setup(w){const m=[{title:"Customers",href:"/customers"}],d=T({searchTerm:"",subscribedOnly:!1,currencies:[{currency:"usd",active:!0},{currency:"eur",active:!0}]}),f=T([{column:"name",header:"Name",active:!0,direction:"asc"},{column:"email",header:"Email",active:!0,direction:"asc"},{column:"cus_id",header:"Stripe ID",active:!0,direction:"asc"},{column:"subscribed",header:"Subscribed",active:!0,direction:"asc"},{column:"currency",header:"Currency",active:!0,direction:"asc"}]);return(y,l)=>(u(),p(g,null,[n(e(K),{title:"Customers"}),n(M,{breadcrumbs:m},{default:o(()=>[i("div",ue,[i("div",de,[l[5]||(l[5]=i("h1",{class:"text-2xl font-bold"},"Customers",-1)),n(e(k),null,{default:o(()=>[n(e(P),{"as-child":""},{default:o(()=>l[2]||(l[2]=[i("button",{class:"btn btn-primary"},"Actions",-1)])),_:1,__:[2]}),n(e(S),null,{default:o(()=>[n(e($),{checked:""},{default:o(()=>l[3]||(l[3]=[_("Export CSV",-1)])),_:1,__:[3]}),n(e($),null,{default:o(()=>l[4]||(l[4]=[_("Import CSV",-1)])),_:1,__:[4]})]),_:1})]),_:1})]),n(e(ie),{filters:d.value,"onUpdate:filters":l[0]||(l[0]=v=>d.value=v),columns:f.value,"onUpdate:columns":l[1]||(l[1]=v=>f.value=v)},null,8,["filters","columns"]),n(e(ae),{filters:d.value,columns:f.value},null,8,["filters","columns"])])]),_:1})],64))}});export{Ce as default};
