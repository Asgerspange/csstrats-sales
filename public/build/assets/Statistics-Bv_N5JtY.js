import{c as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-BtIDg7R2.js";import{d as U,h as O,i as g,c as a,o as r,b as n,u as d,p as T,w as q,a as e,t as l,q as f,e as y,F as m,r as u,s as z}from"./app-CbWppnbc.js";import{c as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DYmTopAa.js";import"./useForwardExpose-98IC4jck.js";import"./VisuallyHidden-BhZ8vHif.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=x("ChartNoAxesColumnIcon",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=x("CloudUploadIcon",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=x("MapIcon",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=x("PercentIcon",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=x("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),S={class:"p-4 space-y-8"},Y={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},B={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition"},E={class:"flex items-center gap-3 mb-2"},L={class:"text-3xl font-bold text-gray-800"},V={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition"},$={class:"flex items-center gap-3 mb-2"},G={class:"text-3xl font-bold text-gray-800"},H={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition"},J={class:"flex items-center gap-3 mb-2"},K={class:"text-3xl font-bold text-gray-800"},Q={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition"},R={class:"flex items-center gap-3 mb-2"},W={class:"text-3xl font-bold text-gray-800"},X={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},Z={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition"},ee={class:"flex items-center gap-3 mb-2"},te={class:"text-3xl font-bold text-gray-800"},se={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition"},oe={class:"flex items-center gap-3 mb-2"},ae={class:"text-3xl font-bold text-gray-800"},re={class:"flex items-center gap-3 mb-2"},le={class:"text-sm text-gray-500"},ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},de={class:"p-6 bg-white border border-gray-200 rounded-xl shadow-sm"},ie={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},ce={key:0,class:"max-h-64 overflow-y-auto divide-y divide-gray-100"},ge={class:"font-medium text-red-600"},he={class:"text-gray-500"},me={class:"text-xs text-gray-500"},ue={key:1,class:"text-gray-500"},xe={class:"p-6 bg-white border border-gray-200 rounded-xl shadow-sm"},pe={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},ye={key:0,class:"max-h-64 overflow-y-auto divide-y divide-gray-100"},be={class:"font-medium text-blue-600"},ve={class:"text-gray-500"},_e={class:"text-xs text-gray-500"},fe={key:1,class:"text-gray-500"},we={class:"p-6 bg-white border border-gray-200 rounded-xl shadow-sm"},ke={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},Me={key:0,class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},De={class:"font-semibold text-green-700 mb-2"},Ce={class:"space-y-1 text-sm text-gray-700 max-h-32 overflow-y-auto"},Fe={key:1,class:"text-gray-500"},Ae={class:"p-6 bg-white border border-gray-200 rounded-xl shadow-sm"},Ie={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},Ne={key:0,class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},Pe={class:"flex justify-between items-center"},je={class:"font-semibold text-purple-700"},Ue={class:"text-gray-700"},Oe={class:"mt-2 w-full bg-purple-200 rounded-full h-2"},Te={key:1,class:"text-gray-500"},Le=U({__name:"Statistics",setup(qe){const{props:N}=O(),P=[{title:"Demos",href:"/admin/demos"},{title:"Statistics",href:"/admin/demos/statistics"}],h=g(()=>N.demos||[]),b=g(()=>h.value.filter(o=>o.status==="failed")),v=g(()=>h.value.filter(o=>["uploading","processing"].includes(o.status))),p=g(()=>h.value.reduce((o,t)=>(t.map&&(o[t.map]||=[]).push(t),o),{})),k=g(()=>{const o=h.value.length;return o?Object.fromEntries(Object.entries(p.value).map(([t,s])=>[t,s.length/o*100])):{}}),M=g(()=>{const o=new Date;return h.value.filter(t=>{const s=new Date(t.created_at);return s.getMonth()===o.getMonth()&&s.getFullYear()===o.getFullYear()})}),D=g(()=>{const o=new Date,t=new Date(o.getFullYear(),o.getMonth()-1,1);return h.value.filter(s=>{const c=new Date(s.created_at);return c.getMonth()===t.getMonth()&&c.getFullYear()===t.getFullYear()})}),i=g(()=>{const o=M.value.length,t=D.value.length;return t===0?o===0?0:100:(o-t)/t*100});return(o,t)=>(r(),a(m,null,[n(d(T),{title:"Dashboard"}),n(j,{breadcrumbs:P},{default:q(()=>[e("div",S,[e("div",Y,[e("div",B,[e("div",E,[n(d(I),{class:"w-5 h-5 text-red-500"}),t[0]||(t[0]=e("h3",{class:"font-semibold text-gray-900"},"Failed Demos",-1))]),e("p",L,l(b.value.length),1),t[1]||(t[1]=e("p",{class:"text-sm text-gray-500"},"Experiencing errors",-1))]),e("div",V,[e("div",$,[n(d(F),{class:"w-5 h-5 text-blue-500"}),t[2]||(t[2]=e("h3",{class:"font-semibold text-gray-900"},"Uploading / Processing",-1))]),e("p",G,l(v.value.length),1),t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"},"Currently being handled",-1))]),e("div",H,[e("div",J,[n(d(A),{class:"w-5 h-5 text-green-500"}),t[4]||(t[4]=e("h3",{class:"font-semibold text-gray-900"},"Maps Detected",-1))]),e("p",K,l(Object.keys(p.value).length),1),t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"},"Grouped maps",-1))]),e("div",Q,[e("div",R,[n(d(w),{class:"w-5 h-5 text-purple-500"}),t[6]||(t[6]=e("h3",{class:"font-semibold text-gray-900"},"Total Demos",-1))]),e("p",W,l(h.value.length),1),t[7]||(t[7]=e("p",{class:"text-sm text-gray-500"},"Overall count",-1))])]),e("div",X,[e("div",Z,[e("div",ee,[n(d(C),{class:"w-5 h-5 text-indigo-500"}),t[8]||(t[8]=e("h3",{class:"font-semibold text-gray-900"},"This Month",-1))]),e("p",te,l(M.value.length),1),t[9]||(t[9]=e("p",{class:"text-sm text-gray-500"},"Demos created this month",-1))]),e("div",se,[e("div",oe,[n(d(C),{class:"w-5 h-5 text-gray-500"}),t[10]||(t[10]=e("h3",{class:"font-semibold text-gray-900"},"Last Month",-1))]),e("p",ae,l(D.value.length),1),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500"},"Compared to this month",-1))]),e("div",{class:f(["p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition",i.value>0?"border-green-300 bg-green-50":i.value<0?"border-red-300 bg-red-50":""])},[e("div",re,[n(d(w),{class:f(["w-5 h-5",i.value>0?"text-green-600":i.value<0?"text-red-600":"text-gray-500"])},null,8,["class"]),t[12]||(t[12]=e("h3",{class:"font-semibold text-gray-900"},"Percent Change",-1))]),e("p",{class:f(["text-3xl font-bold",i.value>0?"text-green-700":i.value<0?"text-red-700":"text-gray-800"])},l(i.value.toFixed(1))+"% ",3),e("p",le,l(i.value>0?"Increase":i.value<0?"Decrease":"No change")+" from last month ",1)],2)]),e("div",ne,[e("div",de,[e("h2",ie,[n(d(I),{class:"w-5 h-5 text-red-500"}),t[13]||(t[13]=y(" Failed Demos ",-1))]),b.value.length?(r(),a("div",ce,[(r(!0),a(m,null,u(b.value,s=>(r(),a("div",{key:s.id,class:"py-2 text-sm text-gray-700"},[e("span",ge,l(s.name||"Unnamed Demo"),1),e("span",he," (ID: "+l(s.id)+")",1),e("div",me,"Error: "+l(s.error_message||"Unknown error"),1)]))),128))])):(r(),a("p",ue,"No failed demos."))]),e("div",xe,[e("h2",pe,[n(d(F),{class:"w-5 h-5 text-blue-500"}),t[14]||(t[14]=y(" Uploading / Processing ",-1))]),v.value.length?(r(),a("div",ye,[(r(!0),a(m,null,u(v.value,s=>(r(),a("div",{key:s.id,class:"py-2 text-sm text-gray-700"},[e("span",be,l(s.name||"Unnamed Demo"),1),e("span",ve," (ID: "+l(s.id)+")",1),e("div",_e,"Status: "+l(s.status),1)]))),128))])):(r(),a("p",fe,"No demos currently uploading or processing."))])]),e("div",we,[e("h2",ke,[n(d(A),{class:"w-5 h-5 text-green-500"}),t[15]||(t[15]=y(" Demos by Map ",-1))]),Object.keys(p.value).length?(r(),a("div",Me,[(r(!0),a(m,null,u(p.value,(s,c)=>(r(),a("div",{key:c,class:"p-4 border border-gray-100 rounded-lg bg-gray-50 hover:bg-gray-100 transition"},[e("h3",De,l(c),1),e("ul",Ce,[(r(!0),a(m,null,u(s,_=>(r(),a("li",{key:_.id}," â€¢ "+l(_.name||"Unnamed Demo")+" (ID: "+l(_.id)+") ",1))),128))])]))),128))])):(r(),a("p",Fe,"No demos grouped by map."))]),e("div",Ae,[e("h2",Ie,[n(d(w),{class:"w-5 h-5 text-purple-500"}),t[16]||(t[16]=y(" Map Percentages ",-1))]),Object.keys(k.value).length?(r(),a("div",Ne,[(r(!0),a(m,null,u(k.value,(s,c)=>(r(),a("div",{key:c,class:"p-4 border border-gray-100 rounded-lg bg-purple-50 hover:bg-purple-100 transition"},[e("div",Pe,[e("span",je,l(c),1),e("span",Ue,l(s.toFixed(2))+"%",1)]),e("div",Oe,[e("div",{class:"bg-purple-600 h-2 rounded-full",style:z({width:`${s}%`})},null,4)])]))),128))])):(r(),a("p",Te,"No map percentages available."))])])]),_:1})],64))}});export{Le as default};
