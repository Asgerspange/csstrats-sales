import{T as F,d as P,e as $,f as S,c as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dm-R0bL8.js";import{d as C,h as b,o as d,w as u,p as A,q as K,s as B,f as o,c as D,v as c,a as p,F as _,b as m,e,g as v,i as f,t as n,n as L,x as k,l as z}from"./app-BGRNuroF.js";import{_ as T,a as j,b as U,c as M,d as w,e as H}from"./TableHeader.vue_vue_type_script_setup_true_lang-DYGgvG1D.js";import{u as q,F as O,b as E,g as G,a as J}from"./index-DrEu-oDV.js";import{c as N}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-LURPWeXY.js";import"./useForwardExpose-BF0rGXys.js";import"./VisuallyHidden-CVXYfjO4.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=N("CalendarPlusIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=N("CalendarSyncIcon",[["path",{d:"M11 10v4h4",key:"172dkj"}],["path",{d:"m11 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"vu0qm5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"m21 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"1qgeyt"}],["path",{d:"M21 22v-4h-4",key:"hrummi"}],["path",{d:"M21 8.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4.3",key:"mctw84"}],["path",{d:"M3 10h4",key:"1el30a"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),V=C({__name:"TooltipProvider",props:{delayDuration:{default:0},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(h){const s=h;return(x,y)=>(d(),b(o(F),K(B(s)),{default:u(()=>[A(x.$slots,"default")]),_:3},16))}}),X={class:"flex items-center justify-between space-x-2 py-4"},Y={class:"flex items-center space-x-2"},Z={class:"text-sm text-gray-700"},ee={class:"flex space-x-1"},te=["disabled"],se=["disabled"],oe=["disabled"],ae=["disabled"],re=C({__name:"InvoiceTable",props:{invoices:{}},setup(h){const s=h,x=["id","invoice_id","customer","collection_method","data"],y=D(()=>Object.keys(s.invoices[0]||{}).filter(l=>!x.includes(l)).filter(l=>{const r=s.invoices[0]?.[l];return!(Array.isArray(r)&&r.length===0)}).map(l=>l==="billing_reason"?{header:"Reason",accessorKey:l,cell:r=>{const t=r.getValue();return t==="subscription_cycle"?c(V,{delayDuration:100},()=>c(P,null,{default:()=>[c($,{asChild:!0},()=>c(W,{class:"w-4 h-4 inline-block text-gray-600"})),c(S,null,()=>String(t))]})):t==="subscription_create"?c(V,{delayDuration:100},()=>c(P,null,{default:()=>[c($,{asChild:!0},()=>c(Q,{class:"w-4 h-4 inline-block text-gray-600"})),c(S,null,()=>String(t))]})):String(t??"")}}:l==="invoice_pdf"?{header:"PDF",accessorKey:l,cell:r=>{const t=r.getValue();return c("a",{href:t,target:"_blank",download:!0,class:"text-blue-600 hover:underline"},"View PDF")}}:l==="sub_id"?{header:"Subscription ID",accessorKey:l,cell:r=>{const t=r.getValue();return c("a",{href:`/subscriptions/${t}`,class:"text-blue-600 hover:underline"},"View Subscription")}}:l=="subtotal"||l=="subtotal_excluding_tax"||l=="amount_paid"?{header:l.charAt(0).toUpperCase()+l.slice(1),accessorKey:l,cell:r=>{const t=r.getValue();return new Intl.NumberFormat("en-US",{style:"currency",currency:r.row.original.currency||"USD"}).format(t/100)}}:l==="status_transitions"?{header:"Status",accessorKey:l,cell:r=>{const t=r.getValue();if(!t)return"N/A";const g=t.finalized_at?"Finalized":"Pending",I=t.finalized_at?new Date(t.finalized_at).toLocaleDateString():"N/A";return`${g} on ${I}`}}:l==="created"?{header:"Created",accessorKey:l,cell:r=>{const t=r.getValue();return new Date(t).toLocaleDateString()}}:{header:l.charAt(0).toUpperCase()+l.slice(1),accessorKey:l})),i=D(()=>s.invoices||[]),a=q({get data(){return i.value},get columns(){return y.value},getCoreRowModel:J(),getPaginationRowModel:G(),getSortedRowModel:E(),initialState:{pagination:{pageSize:10},sorting:[{id:"created",desc:!0}]}});return(l,r)=>(d(),p(_,null,[m(o(T),null,{default:u(()=>[m(o(j),null,{default:u(()=>[(d(!0),p(_,null,v(o(a).getHeaderGroups(),t=>(d(),b(o(w),{key:t.id},{default:u(()=>[(d(!0),p(_,null,v(t.headers,g=>(d(),b(o(H),{key:g.id},{default:u(()=>[f(n(g.isPlaceholder?"":g.column.columnDef.header),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),m(o(U),null,{default:u(()=>[o(a).getRowModel().rows.length?(d(!0),p(_,{key:0},v(o(a).getRowModel().rows,t=>(d(),b(o(w),{key:t.id,class:"cursor-pointer hover:bg-gray-100"},{default:u(()=>[(d(!0),p(_,null,v(t.getVisibleCells(),g=>(d(),b(o(M),{key:g.id},{default:u(()=>[m(o(O),{render:g.column.columnDef.cell,props:g.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(d(),b(o(w),{key:1},{default:u(()=>[m(o(M),{colspan:y.value.length,class:"h-24 text-center"},{default:u(()=>r[4]||(r[4]=[f(" No customers found. ",-1)])),_:1,__:[4]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),e("div",X,[e("div",Y,[e("span",Z," Page "+n(o(a).getState().pagination.pageIndex+1)+" of "+n(o(a).getPageCount())+" ("+n(o(a).getFilteredRowModel().rows.length)+" total rows) ",1),e("div",ee,[e("button",{onClick:r[0]||(r[0]=t=>o(a).setPageIndex(0)),disabled:!o(a).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,te),e("button",{onClick:r[1]||(r[1]=t=>o(a).previousPage()),disabled:!o(a).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,se),e("button",{onClick:r[2]||(r[2]=t=>o(a).nextPage()),disabled:!o(a).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,oe),e("button",{onClick:r[3]||(r[3]=t=>o(a).setPageIndex(o(a).getPageCount()-1)),disabled:!o(a).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,ae)])])])],64))}}),ne={class:"flex flex-col gap-6 p-6"},le={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ie={class:"bg-white rounded-lg shadow p-6 flex flex-col items-center text-center"},de={class:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-3xl font-bold text-gray-600"},ce={class:"text-xl font-bold mt-4"},ue={class:"text-gray-500"},pe={class:"lg:col-span-2 bg-white rounded-lg shadow p-6 grid grid-cols-1 md:grid-cols-2 gap-4"},ge={class:"font-mono"},me={class:"uppercase"},_e={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},fe={class:"bg-white rounded-lg shadow p-6"},be={class:"text-gray-700"},he={key:0},xe={class:"lg:col-span-2 bg-white rounded-lg shadow p-6"},ve={key:0,class:"space-y-3"},ye={class:"flex items-center justify-between"},we={class:"font-medium"},Ce={class:"text-sm text-gray-600"},Pe={class:"text-xs text-gray-500 mt-1"},$e={key:1,class:"text-gray-500 italic"},Se={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},De={class:"bg-white rounded-lg shadow p-6"},Ae=C({__name:"Show",props:{customer:{}},setup(h){const s=h,x=[{title:"Customers",href:"/sales/customers"},{title:s.customer?.name||s.customer?.cus_id,href:"/sales/customers/"+s.customer.id}];return(y,i)=>(d(),p(_,null,[m(o(L),{title:"Customer Details"}),m(R,{breadcrumbs:x},{default:u(()=>[e("div",ne,[e("div",le,[e("div",ie,[e("div",de,n(s.customer.name?.charAt(0)),1),e("h1",ce,n(s.customer.name),1),e("p",ue,n(s.customer.email),1),e("span",{class:k(["mt-3 px-3 py-1 text-sm font-medium rounded-full",s.customer.subscribed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(s.customer.subscribed?"Subscribed":"Not Subscribed"),3)]),e("div",pe,[e("div",null,[i[0]||(i[0]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Customer ID",-1)),e("p",ge,n(s.customer.cus_id),1)]),e("div",null,[i[1]||(i[1]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Currency",-1)),e("p",me,n(s.customer.currency),1)]),e("div",null,[i[2]||(i[2]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Organisation",-1)),e("p",null,n(s.customer?.organisation?.name||"No Organisation"),1)]),e("div",null,[i[3]||(i[3]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Created",-1)),e("p",null,n(new Date(s.customer.created*1e3).toLocaleDateString()),1)])])]),e("div",_e,[e("div",fe,[i[6]||(i[6]=e("h2",{class:"text-lg font-semibold mb-2"},"Address",-1)),e("p",be,[f(n(s.customer.address.line1)+" ",1),s.customer.address.line2?(d(),p("span",he,", "+n(s.customer.address.line2),1)):z("",!0),i[4]||(i[4]=e("br",null,null,-1)),f(" "+n(s.customer.address.postal_code)+" "+n(s.customer.address.city),1),i[5]||(i[5]=e("br",null,null,-1)),f(" "+n(s.customer.address.country),1)])]),e("div",xe,[i[8]||(i[8]=e("h2",{class:"text-lg font-semibold mb-2"},"Subscriptions",-1)),s.customer.subscriptions.length?(d(),p("div",ve,[(d(!0),p(_,null,v(s.customer.subscriptions,a=>(d(),p("div",{key:a.id,class:"p-4 border rounded-lg bg-gray-50"},[e("div",ye,[e("p",we,"Plan ID: "+n(a.plan.id),1),e("span",{class:k(["px-2 py-0.5 text-xs font-semibold rounded-full",a.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(a.status),3)]),e("p",Ce,[f(" Interval: "+n(a.plan.interval_count)+" "+n(a.plan.interval),1),i[7]||(i[7]=e("br",null,null,-1)),f(" Amount: "+n((a.plan.amount/100).toFixed(2))+" "+n(a.plan.currency.toUpperCase()),1)]),e("p",Pe," Current Period: "+n(new Date(a.current_period_start*1e3).toLocaleDateString())+" - "+n(new Date(a.current_period_end*1e3).toLocaleDateString()),1)]))),128))])):(d(),p("p",$e,"No subscriptions found."))])]),e("div",Se,[e("div",De,[i[9]||(i[9]=e("h2",{class:"text-lg font-semibold mb-2"},"Invoices",-1)),m(re,{invoices:s.customer.invoices},null,8,["invoices"])])])])]),_:1})],64))}});export{Ae as default};
