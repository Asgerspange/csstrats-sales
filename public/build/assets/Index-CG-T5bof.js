import{a as V,b as D,c as I,_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-B9VxEYPj.js";import{_ as T,a as L,b as A,c as N,d as w,e as F}from"./TableHeader.vue_vue_type_script_setup_true_lang-IstqArIi.js";import{c as z,_ as M,v as j}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CPfIn9pl.js";import{u as B,b as E,g as H,a as Y}from"./index-C-LtpKXC.js";import{d as P,r as $,u as q,c as U,z as k,a as p,o as d,F as _,b as l,f as i,e,w as n,i as b,j as f,g as x,p as G,t as h,k as K,T as J,s as O,h as Q}from"./app-dWRfawAS.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-BDYkxrGk.js";import{_ as S}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-Qq2DZ2a2.js";import{C as X}from"./chevron-down-CrOQ8Eri.js";import"./useForwardExpose-CNTMZeSX.js";import"./VisuallyHidden-jyn4G8ao.js";import"./check-CzbrpHrw.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=z("ArrowUpDownIcon",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),ee={class:"flex items-center justify-between space-x-2 py-4"},te={class:"flex items-center space-x-2"},se=["value"],ae={class:"flex items-center space-x-2"},oe={class:"text-sm text-gray-700"},ne={class:"flex space-x-1"},le=["disabled"],re=["disabled"],ie=["disabled"],de=["disabled"],ue=P({__name:"UserTable",props:{filters:{},columns:{}},setup(C){const g=$([]),u=C,{props:m}=q(),y=U(()=>{let a=m.users||[];if(u.filters.searchTerm){const t=u.filters.searchTerm.toLowerCase();a=a.filter(o=>o.name?.toLowerCase().includes(t)||o.email?.toLowerCase().includes(t)||o.stripe_id?.toLowerCase().includes(t))}return a}),r=U(()=>u.columns.filter(a=>a.active).map(a=>{const t=["id","has_granted_access","is_admin","created_at"].includes(a.column);return{accessorKey:a.column,header:({column:o})=>t?k(M,{variant:"ghost",onClick:()=>o.toggleSorting(o.getIsSorted()==="asc")},()=>[a.header,k(Z,{class:"ml-2 h-4 w-4"})]):k("span",a.header),accessorFn:o=>a.column==="is_admin"?o.is_admin?"Yes":"No":a.column==="has_granted_access"?o.has_granted_access?"Yes":"No":a.column==="created_at"?new Date(o.created_at).toLocaleDateString():o[a.column],enableSorting:t}})),s=B({get data(){return y.value},get columns(){return r.value},getCoreRowModel:Y(),getPaginationRowModel:H(),getSortedRowModel:E(),onSortingChange:a=>j(a,g),state:{get sorting(){return g.value}},initialState:{pagination:{pageSize:10},sorting:[]}}),v=a=>{O.visit(route("admin.users.show",a.id))};return(a,t)=>(d(),p(_,null,[l(e(T),null,{default:n(()=>[l(e(L),null,{default:n(()=>[(d(!0),p(_,null,b(e(s).getHeaderGroups(),o=>(d(),f(e(w),{key:o.id},{default:n(()=>[(d(!0),p(_,null,b(o.headers,c=>(d(),f(e(F),{key:c.id},{default:n(()=>[c.isPlaceholder?K("",!0):(d(),f(J(typeof c.column.columnDef.header=="function"?c.column.columnDef.header({column:c.column}):c.column.columnDef.header),{key:0}))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),l(e(A),null,{default:n(()=>[e(s).getRowModel().rows.length?(d(!0),p(_,{key:0},b(e(s).getRowModel().rows,o=>(d(),f(e(w),{key:o.id,onClick:c=>v(o.original),class:"cursor-pointer hover:bg-gray-100"},{default:n(()=>[(d(!0),p(_,null,b(o.getVisibleCells(),c=>(d(),f(e(N),{key:c.id},{default:n(()=>[x(h(c.getValue()),1)]),_:2},1024))),128))]),_:2},1032,["onClick"]))),128)):(d(),f(e(w),{key:1},{default:n(()=>[l(e(N),{colspan:r.value.length,class:"h-24 text-center"},{default:n(()=>t[5]||(t[5]=[x(" No users found. ",-1)])),_:1,__:[5]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),i("div",ee,[i("div",te,[t[7]||(t[7]=i("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),i("select",{value:e(s).getState().pagination.pageSize,onChange:t[0]||(t[0]=o=>e(s).setPageSize(Number(o.target.value))),class:"border rounded px-2 py-1"},t[6]||(t[6]=[G('<option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5)]),40,se)]),i("div",ae,[i("span",oe," Page "+h(e(s).getState().pagination.pageIndex+1)+" of "+h(e(s).getPageCount())+" ("+h(e(s).getFilteredRowModel().rows.length)+" total rows) ",1),i("div",ne,[i("button",{onClick:t[1]||(t[1]=o=>e(s).setPageIndex(0)),disabled:!e(s).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,le),i("button",{onClick:t[2]||(t[2]=o=>e(s).previousPage()),disabled:!e(s).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,re),i("button",{onClick:t[3]||(t[3]=o=>e(s).nextPage()),disabled:!e(s).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,ie),i("button",{onClick:t[4]||(t[4]=o=>e(s).setPageIndex(e(s).getPageCount()-1)),disabled:!e(s).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,de)])])])],64))}}),ce={class:"flex items-center gap-8"},me={class:"flex items-center gap-4 w-full"},pe=P({__name:"UserFilters",props:{filters:{},columns:{}},emits:["update:filters","update:columns"],setup(C,{emit:g}){const u=C,m=g,y=s=>{m("update:filters",{...u.filters,searchTerm:s})},r=(s,v)=>{const a=u.columns.map(t=>t.column===s?{...t,active:v}:t);m("update:columns",a)};return(s,v)=>(d(),p("div",ce,[i("div",me,[l(e(W),{"model-value":s.filters.searchTerm,"onUpdate:modelValue":y,type:"text",placeholder:"Search customers (Name, Email, Stripe ID)",class:"input input-bordered w-full max-w-xs"},null,8,["model-value"]),l(e(V),null,{default:n(()=>[l(e(D),{"as-child":""},{default:n(()=>[l(e(M),{variant:"outline"},{default:n(()=>[v[0]||(v[0]=x(" Columns ",-1)),l(e(X),{class:"ml-2 h-4 w-4"})]),_:1,__:[0]})]),_:1}),l(e(I),{align:"end"},{default:n(()=>[(d(!0),p(_,null,b(s.columns,a=>(d(),f(e(S),{key:a.column,class:"capitalize","model-value":a.active,"onUpdate:modelValue":t=>r(a.column,t)},{default:n(()=>[x(h(a.header),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})])]))}}),fe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},_e={class:"flex items-center justify-between"},Pe=P({__name:"Index",setup(C){const g=[{title:"Users",href:"/admin/users"}],u=$({searchTerm:""}),m=$([{column:"id",header:"ID",active:!0},{column:"name",header:"Name",active:!0,direction:"asc"},{column:"email",header:"Email",active:!0,direction:"asc"},{column:"stripe_id",header:"Stripe ID",active:!0,direction:"asc"},{column:"has_granted_access",header:"Has Granted Access",active:!0,direction:"asc"},{column:"is_admin",header:"Is Admin",active:!0,direction:"asc"},{column:"created_at",header:"Created At",active:!0,direction:"asc"}]);return(y,r)=>(d(),p(_,null,[l(e(Q),{title:"Users"}),l(R,{breadcrumbs:g},{default:n(()=>[i("div",fe,[i("div",_e,[r[5]||(r[5]=i("h1",{class:"text-2xl font-bold"},"Users",-1)),l(e(V),null,{default:n(()=>[l(e(D),{"as-child":""},{default:n(()=>r[2]||(r[2]=[i("button",{class:"btn btn-primary"},"Actions",-1)])),_:1,__:[2]}),l(e(I),null,{default:n(()=>[l(e(S),{checked:""},{default:n(()=>r[3]||(r[3]=[x("Export CSV",-1)])),_:1,__:[3]}),l(e(S),null,{default:n(()=>r[4]||(r[4]=[x("Import CSV",-1)])),_:1,__:[4]})]),_:1})]),_:1})]),l(e(pe),{filters:u.value,"onUpdate:filters":r[0]||(r[0]=s=>u.value=s),columns:m.value,"onUpdate:columns":r[1]||(r[1]=s=>m.value=s)},null,8,["filters","columns"]),l(e(ue),{filters:u.value,columns:m.value},null,8,["filters","columns"])])]),_:1})],64))}});export{Pe as default};
