import{R as V,c as k}from"./AppLayout.vue_vue_type_script_setup_true_lang-FaTjhN2J.js";import{_ as S,a as R,b as M,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-ChdA-yeT.js";import{d as v,u as y,h as _,o as d,w as o,b as a,f as e,i as f,e as t,t as m,c as I,v as x,a as h,F as b,g as $,j as F,n as T,M as C}from"./app-CwCiw8VX.js";import{_ as U,a as j,b as B,c as N,d as w,e as A}from"./TableHeader.vue_vue_type_script_setup_true_lang-BYjWWSmy.js";import{u as K,F as z,b as H,g as L,a as q}from"./index-c3Ux_E0P.js";import{C as E}from"./calendar-DsjU6OmO.js";import{c as O}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DzuNUHST.js";import"./useForwardExpose-HAH8QY-T.js";import"./VisuallyHidden-CHTwFaiP.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=O("DollarSignIcon",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),J={class:"flex flex-col gap-2"},Q={class:"text-2xl font-bold"},W=v({__name:"PaidPaymentsCard",setup(P){const{props:p}=y(),c=p.payments_this_month.filter(u=>u.status==="paid");return(u,i)=>(d(),_(e(D),null,{default:o(()=>[a(e(S),null,{default:o(()=>[a(e(R),null,{default:o(()=>i[0]||(i[0]=[f("Paid Payments",-1)])),_:1,__:[0]})]),_:1}),a(e(M),null,{default:o(()=>[t("div",J,[t("p",Q,m(e(c).length),1)])]),_:1})]),_:1}))}}),X={class:"flex flex-col gap-2"},Y={class:"text-2xl font-bold"},Z=v({__name:"UpcomingPaymentsCard",setup(P){const{props:p}=y(),c=p.payments_this_month.filter(u=>u.status==="upcoming");return(u,i)=>(d(),_(e(D),null,{default:o(()=>[a(e(S),null,{default:o(()=>[a(e(R),null,{default:o(()=>i[0]||(i[0]=[f("Upcoming Payments",-1)])),_:1,__:[0]})]),_:1}),a(e(M),null,{default:o(()=>[t("div",X,[t("p",Y,m(e(c).length),1)])]),_:1})]),_:1}))}}),ee={class:"flex flex-col gap-2"},te={class:"text-2xl font-bold"},se=v({__name:"UnpaidPaymentsCard",setup(P){const{props:p}=y(),c=p.payments_this_month.filter(u=>u.status==="unpaid");return(u,i)=>(d(),_(e(D),null,{default:o(()=>[a(e(S),null,{default:o(()=>[a(e(R),null,{default:o(()=>i[0]||(i[0]=[f("Unpaid / Failed Payments",-1)])),_:1,__:[0]})]),_:1}),a(e(M),null,{default:o(()=>[t("div",ee,[t("p",te,m(e(c).length),1)])]),_:1})]),_:1}))}}),ae={class:"flex items-center justify-between space-x-2 py-4"},oe={class:"flex items-center space-x-2"},ne=["value"],le={class:"flex items-center space-x-2"},re={class:"text-sm text-gray-700"},ie={class:"flex space-x-1"},de=["disabled"],ue=["disabled"],ce=["disabled"],pe=["disabled"],_e=v({__name:"PaymentsTable",setup(P){const p=["customer_id"],{props:c}=y(),u=I(()=>c.payments||[]),i=I(()=>Object.keys(c.payments_this_month[0]||{}).filter(r=>!p.includes(r)).filter(r=>{const s=c.payments_this_month[0]?.[r];return!(Array.isArray(s)&&s.length===0)}).map(r=>r==="billing_reason"?{header:"Reason",accessorKey:r,cell:s=>{const l=s.getValue();return l==="subscription_create"?x(TooltipProvider,{delayDuration:100},()=>x(Tooltip,null,{default:()=>[x(TooltipTrigger,{asChild:!0},()=>x(CalendarPlus,{class:"w-4 h-4 inline-block text-gray-600"})),x(TooltipContent,null,()=>String(l))]})):String(l??"")}}:r==="customer"?{header:"Customer",accessorKey:r,cell:s=>{const l=s.getValue();return x("a",{href:route("sales.customers.show",l.id),class:"text-blue-600 hover:underline"},l.name)}}:r=="amount"?{header:r.charAt(0).toUpperCase()+r.slice(1),accessorKey:r,cell:s=>{const l=s.getValue();return new Intl.NumberFormat("en-US",{style:"currency",currency:s.row.original.currency||"USD"}).format(l/100)}}:{header:r.charAt(0).toUpperCase()+r.slice(1),accessorKey:r})),n=K({get data(){return u.value},get columns(){return i.value},getCoreRowModel:q(),getPaginationRowModel:L(),getSortedRowModel:H(),initialState:{pagination:{pageSize:10},sorting:[{id:"date",desc:!0}]}});return(r,s)=>(d(),h(b,null,[a(e(U),null,{default:o(()=>[a(e(j),null,{default:o(()=>[(d(!0),h(b,null,$(e(n).getHeaderGroups(),l=>(d(),_(e(w),{key:l.id},{default:o(()=>[(d(!0),h(b,null,$(l.headers,g=>(d(),_(e(A),{key:g.id},{default:o(()=>[f(m(g.isPlaceholder?"":g.column.columnDef.header),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e(B),null,{default:o(()=>[e(n).getRowModel().rows.length?(d(!0),h(b,{key:0},$(e(n).getRowModel().rows,l=>(d(),_(e(w),{key:l.id,class:"cursor-pointer hover:bg-gray-100"},{default:o(()=>[(d(!0),h(b,null,$(l.getVisibleCells(),g=>(d(),_(e(N),{key:g.id},{default:o(()=>[a(e(z),{render:g.column.columnDef.cell,props:g.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(d(),_(e(w),{key:1},{default:o(()=>[a(e(N),{colspan:i.value.length,class:"h-24 text-center"},{default:o(()=>s[5]||(s[5]=[f(" No customers found. ",-1)])),_:1,__:[5]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),t("div",ae,[t("div",oe,[s[7]||(s[7]=t("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),t("select",{value:e(n).getState().pagination.pageSize,onChange:s[0]||(s[0]=l=>e(n).setPageSize(Number(l.target.value))),class:"border rounded px-2 py-1"},s[6]||(s[6]=[F('<option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5)]),40,ne)]),t("div",le,[t("span",re," Page "+m(e(n).getState().pagination.pageIndex+1)+" of "+m(e(n).getPageCount())+" ("+m(e(n).getFilteredRowModel().rows.length)+" total rows) ",1),t("div",ie,[t("button",{onClick:s[1]||(s[1]=l=>e(n).setPageIndex(0)),disabled:!e(n).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,de),t("button",{onClick:s[2]||(s[2]=l=>e(n).previousPage()),disabled:!e(n).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,ue),t("button",{onClick:s[3]||(s[3]=l=>e(n).nextPage()),disabled:!e(n).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,ce),t("button",{onClick:s[4]||(s[4]=l=>e(n).setPageIndex(e(n).getPageCount()-1)),disabled:!e(n).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,pe)])])])],64))}}),fe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},ge={class:"grid auto-rows-min gap-4 md:grid-cols-3"},me={class:"relative"},xe={class:"relative"},he={class:"relative"},be={class:"grid auto-rows-min gap-4 md:grid-cols-3"},ve={class:"relative"},ye={class:"flex gap-2 justify-center"},Pe={class:"relative"},$e={class:"flex gap-2 justify-center"},Ce={class:"relative"},we={class:"flex gap-2 justify-center"},Te=v({__name:"Index",setup(P){const p=[{title:"Billing",href:"/sales/billing"}],{props:c}=y();console.log(c);const u=[{column:"customer_id",header:"Customer ID",active:!0,direction:"asc"},{column:"subscription_id",header:"Subscription ID",active:!0,direction:"asc"},{column:"amount",header:"Amount",active:!0,direction:"asc"},{column:"currency",header:"Currency",active:!0,direction:"asc"},{column:"date",header:"Date",active:!0,direction:"asc"}];return(i,n)=>(d(),h(b,null,[a(e(T),{title:"Billing"}),a(k,{breadcrumbs:p},{default:o(()=>[t("div",fe,[t("div",ge,[t("div",me,[a(e(W))]),t("div",xe,[a(e(se))]),t("div",he,[a(e(Z))])]),t("div",be,[t("div",ve,[a(e(C),{href:i.route("sales.billing.calendar"),class:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"},{default:o(()=>[t("div",ye,[a(e(E),{class:"h-6 w-6"}),n[0]||(n[0]=f(" Calendar ",-1))])]),_:1},8,["href"])]),t("div",Pe,[a(e(C),{href:i.route("sales.billing.calendar"),class:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"},{default:o(()=>[t("div",$e,[a(e(V),{class:"h-6 w-6"}),n[1]||(n[1]=f(" Invoices ",-1))])]),_:1},8,["href"])]),t("div",Ce,[a(e(C),{href:i.route("sales.billing.subscriptions.index"),class:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"},{default:o(()=>[t("div",we,[a(e(G),{class:"h-6 w-6"}),n[2]||(n[2]=f(" Subscriptions ",-1))])]),_:1},8,["href"])])]),a(e(_e),{columns:u})])]),_:1})],64))}});export{Te as default};
