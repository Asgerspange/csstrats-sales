import{a as V,b as D,c as R,_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cs42LjYY.js";import{_ as T,a as A,b as L,c as N,d as w,e as F}from"./TableHeader.vue_vue_type_script_setup_true_lang-BmruHEXU.js";import{_ as I,v as z}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BeGssF6G.js";import{u as B,g as E,a as j,b as H}from"./index-9OwWTsW5.js";import{d as P,r as S,u as Y,c as U,x as $,i as p,e as u,F as _,f as l,h as i,g as e,w as n,j as b,b as f,m as x,y as G,t as C,p as K,k as q,z as J,s as O}from"./app-B0zoAmHS.js";import{A as Q}from"./arrow-up-down-CzPB9ENF.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-CmmUlY8V.js";import{_ as k}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-CsrmH0uy.js";import{C as X}from"./chevron-down-CIdvylXm.js";import"./useForwardExpose-BxNrSUNo.js";import"./VisuallyHidden-DnlNl30e.js";import"./check-mcKe2F4k.js";const Z={class:"flex items-center justify-between space-x-2 py-4"},ee={class:"flex items-center space-x-2"},te=["value"],se={class:"flex items-center space-x-2"},ae={class:"text-sm text-gray-700"},oe={class:"flex space-x-1"},ne=["disabled"],le=["disabled"],re=["disabled"],ie=["disabled"],ue=P({__name:"UserTable",props:{filters:{},columns:{}},setup(h){const g=S([]),d=h,{props:m}=Y(),y=U(()=>{let a=m.users||[];if(d.filters.searchTerm){const t=d.filters.searchTerm.toLowerCase();a=a.filter(o=>o.name?.toLowerCase().includes(t)||o.email?.toLowerCase().includes(t)||o.stripe_id?.toLowerCase().includes(t))}return a}),r=U(()=>d.columns.filter(a=>a.active).map(a=>{const t=["id","has_granted_access","is_admin","created_at"].includes(a.column);return{accessorKey:a.column,header:({column:o})=>t?$(I,{variant:"ghost",onClick:()=>o.toggleSorting(o.getIsSorted()==="asc")},()=>[a.header,$(Q,{class:"ml-2 h-4 w-4"})]):$("span",a.header),accessorFn:o=>a.column==="is_admin"?o.is_admin?"Yes":"No":a.column==="has_granted_access"?o.has_granted_access?"Yes":"No":a.column==="created_at"?new Date(o.created_at).toLocaleDateString():o[a.column],enableSorting:t}})),s=B({get data(){return y.value},get columns(){return r.value},getCoreRowModel:H(),getPaginationRowModel:j(),getSortedRowModel:E(),onSortingChange:a=>z(a,g),state:{get sorting(){return g.value}},initialState:{pagination:{pageSize:10},sorting:[]}}),v=a=>{J.visit(route("admin.users.show",a.id))};return(a,t)=>(u(),p(_,null,[l(e(T),null,{default:n(()=>[l(e(A),null,{default:n(()=>[(u(!0),p(_,null,b(e(s).getHeaderGroups(),o=>(u(),f(e(w),{key:o.id},{default:n(()=>[(u(!0),p(_,null,b(o.headers,c=>(u(),f(e(F),{key:c.id},{default:n(()=>[c.isPlaceholder?K("",!0):(u(),f(q(typeof c.column.columnDef.header=="function"?c.column.columnDef.header({column:c.column}):c.column.columnDef.header),{key:0}))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),l(e(L),null,{default:n(()=>[e(s).getRowModel().rows.length?(u(!0),p(_,{key:0},b(e(s).getRowModel().rows,o=>(u(),f(e(w),{key:o.id,onClick:c=>v(o.original),class:"cursor-pointer hover:bg-gray-100"},{default:n(()=>[(u(!0),p(_,null,b(o.getVisibleCells(),c=>(u(),f(e(N),{key:c.id},{default:n(()=>[x(C(c.getValue()),1)]),_:2},1024))),128))]),_:2},1032,["onClick"]))),128)):(u(),f(e(w),{key:1},{default:n(()=>[l(e(N),{colspan:r.value.length,class:"h-24 text-center"},{default:n(()=>t[5]||(t[5]=[x(" No users found. ",-1)])),_:1,__:[5]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),i("div",Z,[i("div",ee,[t[7]||(t[7]=i("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),i("select",{value:e(s).getState().pagination.pageSize,onChange:t[0]||(t[0]=o=>e(s).setPageSize(Number(o.target.value))),class:"border rounded px-2 py-1"},t[6]||(t[6]=[G('<option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',5)]),40,te)]),i("div",se,[i("span",ae," Page "+C(e(s).getState().pagination.pageIndex+1)+" of "+C(e(s).getPageCount())+" ("+C(e(s).getFilteredRowModel().rows.length)+" total rows) ",1),i("div",oe,[i("button",{onClick:t[1]||(t[1]=o=>e(s).setPageIndex(0)),disabled:!e(s).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,ne),i("button",{onClick:t[2]||(t[2]=o=>e(s).previousPage()),disabled:!e(s).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,le),i("button",{onClick:t[3]||(t[3]=o=>e(s).nextPage()),disabled:!e(s).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,re),i("button",{onClick:t[4]||(t[4]=o=>e(s).setPageIndex(e(s).getPageCount()-1)),disabled:!e(s).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,ie)])])])],64))}}),de={class:"flex items-center gap-8"},ce={class:"flex items-center gap-4 w-full"},me=P({__name:"UserFilters",props:{filters:{},columns:{}},emits:["update:filters","update:columns"],setup(h,{emit:g}){const d=h,m=g,y=s=>{m("update:filters",{...d.filters,searchTerm:s})},r=(s,v)=>{const a=d.columns.map(t=>t.column===s?{...t,active:v}:t);m("update:columns",a)};return(s,v)=>(u(),p("div",de,[i("div",ce,[l(e(W),{"model-value":s.filters.searchTerm,"onUpdate:modelValue":y,type:"text",placeholder:"Search customers (Name, Email, Stripe ID)",class:"input input-bordered w-full max-w-xs"},null,8,["model-value"]),l(e(V),null,{default:n(()=>[l(e(D),{"as-child":""},{default:n(()=>[l(e(I),{variant:"outline"},{default:n(()=>[v[0]||(v[0]=x(" Columns ",-1)),l(e(X),{class:"ml-2 h-4 w-4"})]),_:1,__:[0]})]),_:1}),l(e(R),{align:"end"},{default:n(()=>[(u(!0),p(_,null,b(s.columns,a=>(u(),f(e(k),{key:a.column,class:"capitalize","model-value":a.active,"onUpdate:modelValue":t=>r(a.column,t)},{default:n(()=>[x(C(a.header),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})])]))}}),pe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},fe={class:"flex items-center justify-between"},Pe=P({__name:"Index",setup(h){const g=[{title:"Users",href:"/admin/users"}],d=S({searchTerm:""}),m=S([{column:"id",header:"ID",active:!0},{column:"name",header:"Name",active:!0,direction:"asc"},{column:"email",header:"Email",active:!0,direction:"asc"},{column:"stripe_id",header:"Stripe ID",active:!0,direction:"asc"},{column:"has_granted_access",header:"Has Granted Access",active:!0,direction:"asc"},{column:"is_admin",header:"Is Admin",active:!0,direction:"asc"},{column:"created_at",header:"Created At",active:!0,direction:"asc"}]);return(y,r)=>(u(),p(_,null,[l(e(O),{title:"Users"}),l(M,{breadcrumbs:g},{default:n(()=>[i("div",pe,[i("div",fe,[r[5]||(r[5]=i("h1",{class:"text-2xl font-bold"},"Users",-1)),l(e(V),null,{default:n(()=>[l(e(D),{"as-child":""},{default:n(()=>r[2]||(r[2]=[i("button",{class:"btn btn-primary"},"Actions",-1)])),_:1,__:[2]}),l(e(R),null,{default:n(()=>[l(e(k),{checked:""},{default:n(()=>r[3]||(r[3]=[x("Export CSV",-1)])),_:1,__:[3]}),l(e(k),null,{default:n(()=>r[4]||(r[4]=[x("Import CSV",-1)])),_:1,__:[4]})]),_:1})]),_:1})]),l(e(me),{filters:d.value,"onUpdate:filters":r[0]||(r[0]=s=>d.value=s),columns:m.value,"onUpdate:columns":r[1]||(r[1]=s=>m.value=s)},null,8,["filters","columns"]),l(e(ue),{filters:d.value,columns:m.value},null,8,["filters","columns"])])]),_:1})],64))}});export{Pe as default};
