import{T as F,d as P,e as $,f as k,c as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-BnfF_lSQ.js";import{d as C,g as b,o as d,w as u,m as A,n as B,p as K,f as s,c as D,q as c,a as p,F as _,b as m,e,r as y,h as f,t as n,l as z,s as S,v as L}from"./app-C5YBmgv4.js";import{u as T,_ as j,a as U,b as H,c as M,d as w,e as q,F as E,g as O,f as G}from"./index-BEqN-UOX.js";import{c as I}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B1QAlOJN.js";import"./useForwardExpose-_lKPIabX.js";import"./VisuallyHidden-3usdfaBV.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=I("CalendarPlusIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=I("CalendarSyncIcon",[["path",{d:"M11 10v4h4",key:"172dkj"}],["path",{d:"m11 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"vu0qm5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"m21 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"1qgeyt"}],["path",{d:"M21 22v-4h-4",key:"hrummi"}],["path",{d:"M21 8.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4.3",key:"mctw84"}],["path",{d:"M3 10h4",key:"1el30a"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),V=C({__name:"TooltipProvider",props:{delayDuration:{default:0},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(h){const t=h;return(x,v)=>(d(),b(s(F),B(K(t)),{default:u(()=>[A(x.$slots,"default")]),_:3},16))}}),W={class:"flex items-center justify-between space-x-2 py-4"},X={class:"flex items-center space-x-2"},Y={class:"text-sm text-gray-700"},Z={class:"flex space-x-1"},ee=["disabled"],te=["disabled"],se=["disabled"],oe=["disabled"],ae=C({__name:"InvoiceTable",props:{invoices:{}},setup(h){const t=h,x=["id","invoice_id","customer","collection_method","data"],v=D(()=>Object.keys(t.invoices[0]||{}).filter(i=>!x.includes(i)).filter(i=>{const r=t.invoices[0]?.[i];return!(Array.isArray(r)&&r.length===0)}).map(i=>i==="billing_reason"?{header:"Reason",accessorKey:i,cell:r=>{const a=r.getValue();return a==="subscription_cycle"?c(V,{delayDuration:100},()=>c(P,null,{default:()=>[c($,{asChild:!0},()=>c(Q,{class:"w-4 h-4 inline-block text-gray-600"})),c(k,null,()=>String(a))]})):a==="subscription_create"?c(V,{delayDuration:100},()=>c(P,null,{default:()=>[c($,{asChild:!0},()=>c(J,{class:"w-4 h-4 inline-block text-gray-600"})),c(k,null,()=>String(a))]})):String(a??"")}}:i==="invoice_pdf"?{header:"PDF",accessorKey:i,cell:r=>{const a=r.getValue();return c("a",{href:a,target:"_blank",download:!0,class:"text-blue-600 hover:underline"},"View PDF")}}:i==="sub_id"?{header:"Subscription ID",accessorKey:i,cell:r=>{const a=r.getValue();return c("a",{href:`/subscriptions/${a}`,class:"text-blue-600 hover:underline"},"View Subscription")}}:i=="subtotal"||i=="subtotal_excluding_tax"||i=="amount_paid"?{header:i.charAt(0).toUpperCase()+i.slice(1),accessorKey:i,cell:r=>{const a=r.getValue();return new Intl.NumberFormat("en-US",{style:"currency",currency:r.row.original.currency||"USD"}).format(a/100)}}:i==="status_transitions"?{header:"Status",accessorKey:i,cell:r=>{const a=r.getValue();if(!a)return"N/A";const g=a.finalized_at?"Finalized":"Pending",N=a.finalized_at?new Date(a.finalized_at*1e3).toLocaleDateString():"N/A";return`${g} on ${N}`}}:{header:i.charAt(0).toUpperCase()+i.slice(1),accessorKey:i})),l=D(()=>t.invoices||[]),o=T({get data(){return l.value},get columns(){return v.value},getCoreRowModel:G(),getPaginationRowModel:O(),initialState:{pagination:{pageSize:10}}});return(i,r)=>(d(),p(_,null,[m(s(j),null,{default:u(()=>[m(s(U),null,{default:u(()=>[(d(!0),p(_,null,y(s(o).getHeaderGroups(),a=>(d(),b(s(w),{key:a.id},{default:u(()=>[(d(!0),p(_,null,y(a.headers,g=>(d(),b(s(q),{key:g.id},{default:u(()=>[f(n(g.isPlaceholder?"":g.column.columnDef.header),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),m(s(H),null,{default:u(()=>[s(o).getRowModel().rows.length?(d(!0),p(_,{key:0},y(s(o).getRowModel().rows,a=>(d(),b(s(w),{key:a.id,class:"cursor-pointer hover:bg-gray-100"},{default:u(()=>[(d(!0),p(_,null,y(a.getVisibleCells(),g=>(d(),b(s(M),{key:g.id},{default:u(()=>[m(s(E),{render:g.column.columnDef.cell,props:g.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(d(),b(s(w),{key:1},{default:u(()=>[m(s(M),{colspan:v.value.length,class:"h-24 text-center"},{default:u(()=>r[4]||(r[4]=[f(" No customers found. ",-1)])),_:1,__:[4]},8,["colspan"])]),_:1}))]),_:1})]),_:1}),e("div",W,[e("div",X,[e("span",Y," Page "+n(s(o).getState().pagination.pageIndex+1)+" of "+n(s(o).getPageCount())+" ("+n(s(o).getFilteredRowModel().rows.length)+" total rows) ",1),e("div",Z,[e("button",{onClick:r[0]||(r[0]=a=>s(o).setPageIndex(0)),disabled:!s(o).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," First ",8,ee),e("button",{onClick:r[1]||(r[1]=a=>s(o).previousPage()),disabled:!s(o).getCanPreviousPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Previous ",8,te),e("button",{onClick:r[2]||(r[2]=a=>s(o).nextPage()),disabled:!s(o).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Next ",8,se),e("button",{onClick:r[3]||(r[3]=a=>s(o).setPageIndex(s(o).getPageCount()-1)),disabled:!s(o).getCanNextPage(),class:"px-2 py-1 border rounded disabled:opacity-50"}," Last ",8,oe)])])])],64))}}),ne={class:"flex flex-col gap-6 p-6"},re={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},le={class:"bg-white rounded-lg shadow p-6 flex flex-col items-center text-center"},ie={class:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-3xl font-bold text-gray-600"},de={class:"text-xl font-bold mt-4"},ce={class:"text-gray-500"},ue={class:"lg:col-span-2 bg-white rounded-lg shadow p-6 grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"font-mono"},ge={class:"uppercase"},me={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},_e={class:"bg-white rounded-lg shadow p-6"},fe={class:"text-gray-700"},be={key:0},he={class:"lg:col-span-2 bg-white rounded-lg shadow p-6"},xe={key:0,class:"space-y-3"},ye={class:"flex items-center justify-between"},ve={class:"font-medium"},we={class:"text-sm text-gray-600"},Ce={class:"text-xs text-gray-500 mt-1"},Pe={key:1,class:"text-gray-500 italic"},$e={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ke={class:"bg-white rounded-lg shadow p-6"},Fe=C({__name:"Show",props:{customer:{}},setup(h){const t=h,x=[{title:"Customers",href:"/customers"},{title:t.customer?.name||t.customer?.cus_id,href:"/customers/"+t.customer.id}];return(v,l)=>(d(),p(_,null,[m(s(z),{title:"Customer Details"}),m(R,{breadcrumbs:x},{default:u(()=>[e("div",ne,[e("div",re,[e("div",le,[e("div",ie,n(t.customer.name?.charAt(0)),1),e("h1",de,n(t.customer.name),1),e("p",ce,n(t.customer.email),1),e("span",{class:S(["mt-3 px-3 py-1 text-sm font-medium rounded-full",t.customer.subscribed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(t.customer.subscribed?"Subscribed":"Not Subscribed"),3)]),e("div",ue,[e("div",null,[l[0]||(l[0]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Customer ID",-1)),e("p",pe,n(t.customer.cus_id),1)]),e("div",null,[l[1]||(l[1]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Currency",-1)),e("p",ge,n(t.customer.currency),1)]),e("div",null,[l[2]||(l[2]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Balance",-1)),e("p",null,n(t.customer.balance),1)]),e("div",null,[l[3]||(l[3]=e("h2",{class:"text-sm font-semibold text-gray-500"},"Created",-1)),e("p",null,n(new Date(t.customer.created*1e3).toLocaleDateString()),1)])])]),e("div",me,[e("div",_e,[l[6]||(l[6]=e("h2",{class:"text-lg font-semibold mb-2"},"Address",-1)),e("p",fe,[f(n(t.customer.address.line1)+" ",1),t.customer.address.line2?(d(),p("span",be,", "+n(t.customer.address.line2),1)):L("",!0),l[4]||(l[4]=e("br",null,null,-1)),f(" "+n(t.customer.address.postal_code)+" "+n(t.customer.address.city),1),l[5]||(l[5]=e("br",null,null,-1)),f(" "+n(t.customer.address.country),1)])]),e("div",he,[l[8]||(l[8]=e("h2",{class:"text-lg font-semibold mb-2"},"Subscriptions",-1)),t.customer.subscriptions.length?(d(),p("div",xe,[(d(!0),p(_,null,y(t.customer.subscriptions,o=>(d(),p("div",{key:o.id,class:"p-4 border rounded-lg bg-gray-50"},[e("div",ye,[e("p",ve,"Plan ID: "+n(o.plan.id),1),e("span",{class:S(["px-2 py-0.5 text-xs font-semibold rounded-full",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(o.status),3)]),e("p",we,[f(" Interval: "+n(o.plan.interval_count)+" "+n(o.plan.interval),1),l[7]||(l[7]=e("br",null,null,-1)),f(" Amount: "+n((o.plan.amount/100).toFixed(2))+" "+n(o.plan.currency.toUpperCase()),1)]),e("p",Ce," Current Period: "+n(new Date(o.current_period_start*1e3).toLocaleDateString())+" - "+n(new Date(o.current_period_end*1e3).toLocaleDateString()),1)]))),128))])):(d(),p("p",Pe,"No subscriptions found."))])]),e("div",$e,[e("div",ke,[l[9]||(l[9]=e("h2",{class:"text-lg font-semibold mb-2"},"Invoices",-1)),m(ae,{invoices:t.customer.invoices},null,8,["invoices"])])])])]),_:1})],64))}});export{Fe as default};
